{"version":3,"sources":["components/PeerJs.tsx","App.tsx","../node_modules/peerjs/dist sync"],"names":["PeerJs","useState","id","setId","Peer","peer","friendId","setFriendId","setConn","peerStream","setPeerStream","myStream","setStream","useEffect","on","conn","data","console","log","call","navigator","mediaDevices","getUserMedia","audio","video","then","mediaStream","answer","stream","catch","err","Input","onChange","event","target","value","Button","variant","color","onClick","style","position","top","right","marginBottom","marginTop","url","playing","width","height","App","className","webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports"],"mappings":"kOAMe,SAASA,IAAU,IAAD,EAETC,mBAAS,IAFA,mBAEtBC,EAFsB,KAElBC,EAFkB,OAGLF,mBAAS,IAAIG,KAHR,mBAGtBC,EAHsB,aAIGJ,mBAAS,KAJZ,mBAItBK,EAJsB,KAIZC,EAJY,OAKLN,mBAAc,MALT,mBAKhBO,GALgB,aAMOP,mBAAc,MANrB,mBAMtBQ,EANsB,KAMVC,EANU,OAOCT,mBAAc,MAPf,mBAOtBU,EAPsB,KAOZC,EAPY,KAqF7B,OA5EAC,qBAAU,WACNR,EAAKS,GAAG,QAAQ,SAAUZ,GACtBC,EAAMD,MAGVG,EAAKS,GAAG,cAAc,SAAUC,GAC5BA,EAAKD,GAAG,QAAQ,SAAUE,GACtBC,QAAQC,IAAIF,MAEhBD,EAAKD,GAAG,QAAQ,WACZG,QAAQC,IAAI,qBACZD,QAAQC,IAAI,iBAAmBH,EAAKV,SAExCG,EAAQO,GACRR,EAAYQ,EAAKV,SAErBA,EAAKS,GAAG,QAAQ,SAAUK,GAEtBZ,EAAYY,EAAKd,MACjBe,UAAUC,aAAaC,aAAa,CAAEC,OAAO,EAAOC,OAAO,IACtDC,MAAK,SAAUC,GACZT,QAAQC,IAAI,4BACZD,QAAQC,IAAIQ,GACZP,EAAKQ,OAAOD,GACZd,EAAUc,GACVP,EAAKL,GAAG,UAAU,SAAUc,GACxBX,QAAQC,IAAI,8BACZR,EAAckB,SAGrBC,OAAM,SAAUC,GACbb,QAAQC,IAAIY,SAIxBb,QAAQC,IAAI,sBACb,CAACb,IAEJQ,qBAAU,WACNI,QAAQC,IAAI,mBACZD,QAAQC,IAAIP,GACZM,QAAQC,IAAIT,KACb,CAACE,EAAUF,IAmCV,gCACI,cAACsB,EAAA,EAAD,CAAOC,SAAU,SAAAC,GAAK,OAAI1B,EAAY0B,EAAMC,OAAOC,UAGnD,cAACC,EAAA,EAAD,CAAQC,QAAQ,YAAYC,MAAM,UAAUC,QAtBpD,WACItB,QAAQC,IAAI,cACZE,UAAUC,aAAaC,aAAa,CAAEC,OAAO,EAAOC,OAAO,IACtDC,MAAK,SAAUG,GACZhB,EAAUgB,GACV,IAAIT,EAAOd,EAAKc,KAAKb,EAAUsB,GAC/BT,EAAKL,GAAG,UAAU,SAAUc,GACxBX,QAAQC,IAAI,4BACZR,EAAckB,MAElBpB,EAAQW,MAEXU,OAAM,SAAUC,GACbb,QAAQC,IAAIY,OAShB,oBAEA,gCACK,UAAY5B,EACb,uBACC,kBAAoBI,KAEzB,sBAAKkC,MAAO,CAAEC,SAAU,WAAYC,IAAK,EAAGC,MAAO,EAAGC,aAAc,IAAKC,UAAW,IAApF,UACI,8BACI,cAAC,IAAD,CAAaC,IAAKrC,EAAYsC,SAAS,EAAMC,MAAM,OAAOC,OAAO,WAErE,qBAAKT,MAAO,CAAEC,SAAU,WAAYC,IAAK,EAAGC,MAAO,GAAnD,SACI,cAAC,IAAD,CAAaG,IAAKnC,EAAUoC,SAAS,EAAMC,MAAM,MAAMC,OAAO,gBCvFnEC,UAdf,WACE,OACE,qBAAKC,UAAU,MAAf,SACE,wBAAQA,UAAU,aAAlB,SAKE,cAACnD,EAAD,U,sCCfR,SAASoD,EAAoBC,GAC5B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBF,EAAM,KAEjD,MADAC,EAAEE,KAAO,mBACHF,EAEPF,EAAoBK,KAAO,WAAa,MAAO,IAC/CL,EAAoBM,QAAUN,EAC9BO,EAAOC,QAAUR,EACjBA,EAAoBlD,GAAK","file":"static/js/4.7ec62bf8.chunk.js","sourcesContent":["import Peer from 'peerjs';\nimport React, { useState, useEffect } from 'react'\nimport { Button, Input } from '@material-ui/core';\nimport VideoChat from \"./VideoChat\";\nimport ReactPlayer from 'react-player'\n\nexport default function PeerJs() {\n\n    const [id, setId] = useState(\"\");\n    const [peer, setPeer] = useState(new Peer());\n    const [friendId, setFriendId] = useState('');\n    const [conn, setConn] = useState<any>(null);\n    const [peerStream, setPeerStream] = useState<any>(null);\n    const [myStream, setStream] = useState<any>(null);\n\n    useEffect(() => {\n        peer.on('open', function (id: any) {\n            setId(id)\n        });\n\n        peer.on('connection', function (conn: any) {\n            conn.on('data', function (data: any) {\n                console.log(data);\n            });\n            conn.on('open', () => {\n                console.log(\"Connection opened\");\n                console.log(\"Connected to :\" + conn.peer);\n            });\n            setConn(conn);\n            setFriendId(conn.peer);\n        });\n        peer.on('call', function (call) {\n            // Answer the call, providing our mediaStream\n            setFriendId(call.peer);\n            navigator.mediaDevices.getUserMedia({ audio: false, video: true })\n                .then(function (mediaStream) {\n                    console.log(\"Answering media stream..\");\n                    console.log(mediaStream);\n                    call.answer(mediaStream);\n                    setStream(mediaStream);\n                    call.on('stream', function (stream) {\n                        console.log(\"Setting stream from caller\");\n                        setPeerStream(stream);\n                    });\n                })\n                .catch(function (err) {\n                    console.log(err);\n                });\n        });\n\n        console.log(\"Peer initialized\");\n    }, [peer]);\n\n    useEffect(() => {\n        console.log(\"Streams updated\");\n        console.log(myStream);\n        console.log(peerStream);\n    }, [myStream, peerStream])\n\n    function send() {\n        if (conn) {\n            conn.send('Hello!');\n        }\n    }\n\n    function connect() {\n        console.log(\"Connecting...\");\n        let conn = peer.connect(friendId);\n        conn.on('data', function (data: any) {\n            console.log(data);\n        });\n        setConn(conn);\n    }\n\n    function call() {\n        console.log(\"Calling...\");\n        navigator.mediaDevices.getUserMedia({ audio: false, video: true })\n            .then(function (stream) {\n                setStream(stream);\n                let call = peer.call(friendId, stream);\n                call.on('stream', function (stream) {\n                    console.log(\"Setting stream from peer\");\n                    setPeerStream(stream);\n                });\n                setConn(call);\n            })\n            .catch(function (err) {\n                console.log(err);\n            });\n    }\n\n    return (\n        <div>\n            <Input onChange={event => setFriendId(event.target.value)} />\n            {/* <Button variant=\"contained\" color=\"primary\" onClick={send}> Send </Button>\n            <Button variant=\"contained\" color=\"primary\" onClick={connect}> Conect </Button> */}\n            <Button variant=\"contained\" color=\"primary\" onClick={call}> Call </Button>\n\n            <div>\n                {\"MY ID: \" + id}\n                <br />\n                {\"Connecting to: \" + friendId}\n            </div>\n            <div style={{ position: \"relative\", top: 0, right: 0, marginBottom: 250, marginTop: 25 }} >\n                <div>\n                    <ReactPlayer url={peerStream} playing={true} width=\"100%\" height=\"100%\" />\n                </div>\n                <div style={{ position: \"absolute\", top: 0, right: 0 }}>\n                    <ReactPlayer url={myStream} playing={true} width=\"25%\" height=\"25%\" />\n                </div>\n            </div>\n\n        </div >\n    )\n}\n\n\n\n\n\n","import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n// import InstallButton from './components/InstallButton';\nimport RequestButton from './components/RequestButton';\nimport PeerJs from './components/PeerJs';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        {/* <img src={logo} className=\"App-logo\" alt=\"logo\" />\n        <p> Hello James </p> */}\n        {/* <InstallButton /> */}\n        {/* <RequestButton /> */}\n        <PeerJs />\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 36;"],"sourceRoot":""}