(this["webpackJsonpjamesroberts.github.io"]=this["webpackJsonpjamesroberts.github.io"]||[]).push([[4],{11:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t(0),o=(t(45),t(46)),a=t.n(o),i=t(83),s=t(48),u=t(84),l=t(49),j=t.n(l),d=t(103),p=t(101),b=t(51),f=t.n(b);function h(e){var n;console.log(e.peerStreams);var t="100%",c="100%";return e.peerStreams.length>0&&(t="".concat(100/e.peerStreams.length,"%"),c="".concat(100/e.peerStreams.length,"%")),Object(r.jsxs)("div",{style:{position:"relative",top:0,right:0,marginBottom:25,marginTop:25},children:[Object(r.jsx)("ul",{children:null===(n=e.peerStreams)||void 0===n?void 0:n.map((function(e){return Object(r.jsx)("li",{children:Object(r.jsx)(f.a,{url:e,playing:!0,width:t,height:c})},e.id)}))}),Object(r.jsx)("div",{style:{position:"absolute",top:0,right:0},children:Object(r.jsx)(f.a,{url:e.userStream,playing:!0,width:"25%",height:"25%"})})]})}var O=t(104),v=t(77),g=t.n(v);function x(){var e=Object(c.useState)(""),n=Object(u.a)(e,2),t=n[0],o=n[1],l=Object(c.useState)(new j.a),b=Object(u.a)(l,2),f=b[0],v=(b[1],Object(c.useState)("")),x=Object(u.a)(v,2),m=x[0],k=x[1],S=Object(c.useState)(null),y=Object(u.a)(S,2),w=(y[0],y[1]),D=Object(c.useState)(null),C=Object(u.a)(D,2),E=C[0],M=C[1],N=Object(c.useState)([]),T=Object(u.a)(N,2),U=T[0],z=T[1],A=Object(c.useState)(null),B=Object(u.a)(A,2),J=B[0],P=B[1],_=Object(c.useState)(!1),F=Object(u.a)(_,2),I=F[0],L=F[1];function Y(e){o(e)}function q(e){e=K(e),w(e),k(e.peer)}function G(e){return H.apply(this,arguments)}function H(){return(H=Object(s.a)(a.a.mark((function e(n){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(n.peer),t={audio:!1,video:!0},e.prev=2,!I){e.next=9;break}return e.next=6,navigator.mediaDevices.getDisplayMedia(t);case 6:r=e.sent,e.next=12;break;case 9:return e.next=11,navigator.mediaDevices.getUserMedia(t);case 11:r=e.sent;case 12:n.answer(r),P(r),n=Q(n),M(n),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})))).apply(this,arguments)}function K(e){return e.on("open",(function(){console.log("Connected opened with peer: "+e.peer)})),e.on("data",(function(e){console.log(e)})),e.on("close",(function(){console.log("Connection closed.")})),e.on("error",(function(e){console.log(e)})),e}function Q(e){return e.on("stream",(function(e){return z((function(n){return[].concat(Object(i.a)(n),[e])}))})),e.on("error",(function(e){return console.log(e)})),e.on("close",(function(){z((function(){return[]})),M(null)})),e}function R(){return(R=Object(s.a)(a.a.mark((function e(){var n,t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!I){e.next=7;break}return e.next=4,navigator.mediaDevices.getDisplayMedia({audio:!1,video:!0});case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,navigator.mediaDevices.getUserMedia({audio:!1,video:!0});case 9:n=e.sent;case 10:t=Q(t=f.call(m,n)),M(t),P(n),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}Object(c.useEffect)((function(){f.on("open",Y),f.on("connection",q),f.on("call",G),console.log("Peer initialized")}),[f]);return Object(r.jsxs)("div",{children:[Object(r.jsx)(d.a,{onChange:function(e){return k(e.target.value)}}),Object(r.jsxs)(p.a,{variant:"contained",color:"primary",onClick:function(){return R.apply(this,arguments)},children:[" ",Object(r.jsx)(g.a,{fontSize:"large"})," "]}),Object(r.jsx)(O.a,{checked:I,onChange:function(e){L(e.target.checked)},color:"primary",name:"checkedB",inputProps:{"aria-label":"primary checkbox"}})," Share Screen",Object(r.jsxs)("div",{children:["MY ID: "+t,Object(r.jsx)("br",{}),"Connecting to: "+m]}),Object(r.jsx)(h,{peerStreams:U,userStream:J}),Object(r.jsx)("div",{children:E?Object(r.jsx)(p.a,{variant:"contained",color:"secondary",onClick:function(){null===E||void 0===E||E.close(),M(null),null===J||void 0===J||J.getTracks().forEach((function(e){return e.stop()})),null===U||void 0===U||U.forEach((function(e){return e.getTracks().forEach((function(e){return e.stop()}))})),P(null),z((function(){return[]}))},children:" Disconnect "}):null})]})}n.default=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)("header",{className:"App-header",children:Object(r.jsx)(x,{})})})}},45:function(e,n,t){},50:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=50}}]);
//# sourceMappingURL=4.027f4c94.chunk.js.map